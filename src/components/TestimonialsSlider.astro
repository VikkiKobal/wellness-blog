---
const testimonials = [
  {
    quote:
      '“Antonina guided our leadership team through a reflective journey that deepened empathy and sparked a practical roadmap for SEL across classrooms.”',
    name: 'Olena Kuzmenko',
    role: 'Director of Pedagogy, Lviv School District',
    icon: '/images/testimonial-rating.svg',
},
  {
    quote:
      '“The trauma-informed framework she shared allowed our staff to create calmer spaces for students while staying grounded under pressure.”',
    name: 'Marco Gutierrez',
    role: 'Wellbeing Coordinator, Future Learning Academy',
    icon: '/images/testimonial-rating.svg',
  },
  {
    quote:
      '“Her approach to digital pedagogy is simultaneously human and innovative—our team now designs online spaces that feel warm, clear, and purposeful.”',
    name: 'Sophie Patel',
    role: 'Digital Learning Lead, Kindred Education',
    icon: '/images/testimonial-rating.svg',
  },
];
---

<section class="testimonials-slider" aria-label="Testimonials">
  <div class="container">
    <div class="section-heading">
      <h2>What People Say About My Services</h2>
    </div>

    <div class="slider-window" role="region">
      <div class="slider-track" id="testimonialTrack">
        {testimonials.map((testimonial, index) => (
          <article class="testimonial-card" data-index={index}>
            <div class="emoji">
              <img src={testimonial.icon} alt="testimonial icon" />
            </div>
            <p class="quote">{testimonial.quote}</p>
            <p class="author">{testimonial.name}</p>
            <p class="role">{testimonial.role}</p>
          </article>
        ))}
      </div>
    </div>

    <div class="slider-controls">
      <button class="control-btn" id="testimonialPrev" aria-label="Previous testimonial">←</button>
      <button class="control-btn" id="testimonialNext" aria-label="Next testimonial">→</button>
    </div>
  </div>

  <script type="module">
    const testimonials = document.querySelectorAll('.testimonial-card');
    const track = document.getElementById('testimonialTrack');
    const prev = document.getElementById('testimonialPrev');
    const next = document.getElementById('testimonialNext');
    let currentIndex = 0;

    function updateSlider(index) {
      const cardWidth = testimonials[0]?.offsetWidth || 0;
      track?.style.setProperty('--offset', `-${index * cardWidth}px`);
      testimonials.forEach((card, cardIndex) => {
        card.classList.toggle('is-active', cardIndex === index);
      });
    }

    prev?.addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + testimonials.length) % testimonials.length;
      updateSlider(currentIndex);
    });

    next?.addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % testimonials.length;
      updateSlider(currentIndex);
    });

    window.addEventListener('resize', () => updateSlider(currentIndex));
    updateSlider(currentIndex);
  </script>
</section>

<style>
  .testimonials-slider {
    padding: 100px 0;
    background: var(--color-bg-soft);
  }

  .section-heading {
    text-align: left;
    margin-bottom: 40px;
  }

  .section-heading h2 {
    font-family: var(--font-accent);
    font-size: 42px;
    margin: 0;
  }

  .section-heading .eyebrow {
    letter-spacing: 0.4em;
    text-transform: uppercase;
    font-size: 12px;
    color: var(--color-text-muted);
    margin-bottom: 12px;
  }

  .slider-window {
    overflow: hidden;
    position: relative;
  }

  .slider-track {
    display: flex;
    gap: 24px;
    transition: transform 0.5s ease;
    transform: translateX(var(--offset, 0));
  }

  .testimonial-card {
    flex: 0 0 460px;
    border-radius: 32px;
    padding: 40px;
    min-height: 260px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    opacity: 0.6;
    transform: scale(0.95);
    transition: transform 0.3s ease, opacity 0.3s ease;
    border: 1px solid rgba(17, 82, 62, 0.12);
    background: rgba(255, 255, 255, 0.85);
    box-shadow: none;
  }

  .testimonial-card.is-active {
    opacity: 1;
    transform: scale(1);
  }

  .emoji {
    font-size: 32px;
  }

  .emoji img {
    width: 56px;
    height: auto;
    display: block;
  }

  .quote {
    font-size: 20px;
    line-height: 1.6;
    color: var(--color-text-black);
  }

  .author {
    font-weight: 600;
    font-size: 18px;
    margin-top: auto;
  }

  .role {
    font-size: 16px;
    color: var(--color-text-muted);
  }

  .slider-controls {
    margin-top: 32px;
    display: flex;
    justify-content: center;
    gap: 16px;
  }

  .control-btn {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    border: 1px solid var(--color-primary);
    background: transparent;
    font-size: 20px;
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  .control-btn:hover {
    background: var(--color-primary);
    color: var(--color-white);
  }

  @media (max-width: 1100px) {
    .testimonial-card {
      flex: 0 0 380px;
      padding: 32px;
    }
  }

  @media (max-width: 768px) {
    .testimonials-slider {
      padding: 60px 0;
    }

    .slider-track {
      gap: 16px;
    }

    .testimonial-card {
      flex: 0 0 90vw;
      padding: 24px;
    }
  }
</style>

